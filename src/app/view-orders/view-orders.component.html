<app-navbar-full></app-navbar-full>
<h2>Orders</h2>

  <h4>Ongoing Orders</h4>
  <div *ngIf="ongoingOrders.length>0">
  <table class="table table-striped">
    <tr>
      <th>Customer Name</th>
      <th>Email</th>
      <th>Phone</th>
      <th>Order Type</th>
      <th>Amount</th>
      <th>Paid</th>
      <th>Balance</th>
      <th>Event Date</th>
      <th>Event Location</th>
      <th>Description</th>
      <th>Order Status</th>
      <th>Delivery Status</th> <th colspan="2">Actions</th>
    </tr>
    <tr *ngFor="let u of ongoingOrders">
      <td>{{u.customerName}}</td>
      <td>{{u.customerEmail}}</td>
      <td>{{u.customerPhone}}</td>
      <td>{{u.orderType}}</td>
      <td>{{u.orderAmount}}</td>
      <td>{{u.amountPaid}}</td>
      <td>{{u.remainingBalance}}</td>
      <td>{{u.eventDate | date:'dd-MM-yyyy'}}</td>
      <td>{{u.eventLocation }}</td>
      <td>{{u.orderDescription}}</td>
      <td>{{u.closed | yesNo}}</td>
      <td>{{u.delivered | yesNo}}</td>
      <td>
        <button  (click)="viewOrder(u.orderId)" >View Order</button>
        <button  (click)="updateOrder(u.orderId)" >Update Order</button>

      </td>
    
    </tr>
  </table>
</div>
<div *ngIf="ongoingOrders.length==0"><h3>No ongoing orders!</h3></div>

<div *ngIf="completedOrders.length>0">
  <h4>Completed Orders</h4>
  <table class="table table-striped">
    <tr>
      <th>Customer Name</th>
      <th>Email</th>
      <th>Phone</th>
      <th>Order Type</th>
      <th>Amount</th>
      <th>Paid</th>
      <th>Balance</th>
      <th>Event Date</th>
      <th>Event Location</th>
      <th>Description</th>
      <th>Order Status</th>
      <th>Delivery Status</th> <th colspan="2">Actions</th>
    </tr>
    <tr *ngFor="let u of completedOrders">
      <td>{{u.customerName}}</td>
      <td>{{u.customerEmail}}</td>
      <td>{{u.customerPhone}}</td>
      <td>{{u.orderType}}</td>
      <td>{{u.orderAmount}}</td>
      <td>{{u.amountPaid}}</td>
      <td>{{u.remainingBalance}}</td>
      <td>{{u.eventDate | date:'dd-MM-yyyy'}}</td>
      <td>{{u.eventLocation }}</td>
      <td>{{u.orderDescription}}</td>
      <td>{{u.closed | yesNo}}</td>
      <td>{{u.delivered | yesNo}}</td>
      <td>
        <button (click)="printInvoice(u.orderId)" >Print Invoice</button>
      </td>
    
    </tr>
  </table>
</div>
<div *ngIf="completedOrders.length==0"><h3>No Completed orders!</h3></div>

<div class="orders-container">
  <h4>Ongoing Orders</h4>
  <div class="card" *ngFor="let order of ongoingOrders">
    <div class="card-header">
      <h5>{{ order.customerName }}</h5>
      <p>{{ order.customerEmail }}</p>
    </div>
    <div class="card-body">
      <p><strong>Phone:</strong> {{ order.customerPhone }}</p>
      <p><strong>Order Type:</strong> {{ order.orderType }}</p>
      <p><strong>Amount:</strong> {{ order.orderAmount }}</p>
      <p><strong>Paid:</strong> {{ order.amountPaid }}</p>
      <p><strong>Balance:</strong> {{ order.remainingBalance }}</p>
      <p><strong>Event Date:</strong> {{ order.eventDate | date:'dd-MM-yyyy' }}</p>
      <p><strong>Event Location:</strong> {{ order.eventLocation }}</p>
      <p><strong>Description:</strong> {{ order.orderDescription }}</p>
      <p><strong>Order Status:</strong> {{ order.closed | yesNo }}</p>
      <p><strong>Delivery Status:</strong> {{ order.delivered | yesNo }}</p>
    </div>
    <div class="card-footer">
      <button class="view-order-button" (click)="viewOrder(order.orderId)">View Order</button>
    </div>
  </div>

  <h4>Completed Orders</h4>
  <div class="card" *ngFor="let order of completedOrders">
    <div class="card-header">
      <h5>{{ order.customerName }}</h5>
      <p>{{ order.customerEmail }}</p>
    </div>
    <div class="card-body">
      <p><strong>Phone:</strong> {{ order.customerPhone }}</p>
      <p><strong>Order Type:</strong> {{ order.orderType }}</p>
      <p><strong>Amount:</strong> {{ order.orderAmount }}</p>
      <p><strong>Paid:</strong> {{ order.amountPaid }}</p>
      <p><strong>Balance:</strong> {{ order.remainingBalance }}</p>
      <p><strong>Event Date:</strong> {{ order.eventDate | date:'dd-MM-yyyy' }}</p>
      <p><strong>Event Location:</strong> {{ order.eventLocation }}</p>
      <p><strong>Description:</strong> {{ order.orderDescription }}</p>
      <p><strong>Order Status:</strong> {{ order.closed | yesNo }}</p>
      <p><strong>Delivery Status:</strong> {{ order.delivered | yesNo }}</p>
    </div>
    <div class="card-footer">
      <button class="view-order-button" (click)="viewOrder(order.orderId)">View Order</button>
    </div>
  </div>
</div>

<div class="orders-container">
  <h4>Ongoing Orders</h4>
  <div class="card" *ngFor="let order of ongoingOrders" (click)="toggleOrder(order.orderId)" [ngClass]="{'expanded': expandedOrderId === order.orderId}">
    <div class="card-header">
      <h5>{{ order.customerName }}</h5>
      <p>{{ order.customerEmail }}</p>
    </div>
    <div class="card-body" *ngIf="expandedOrderId === order.orderId">
      <p><strong>Phone:</strong> {{ order.customerPhone }}</p>
      <p><strong>Order Type:</strong> {{ order.orderType }}</p>
      <p><strong>Amount:</strong> {{ order.orderAmount }}</p>
      <p><strong>Paid:</strong> {{ order.amountPaid }}</p>
      <p><strong>Balance:</strong> {{ order.remainingBalance }}</p>
      <p><strong>Event Date:</strong> {{ order.eventDate | date:'dd-MM-yyyy' }}</p>
      <p><strong>Event Location:</strong> {{ order.eventLocation }}</p>
      <p><strong>Description:</strong> {{ order.orderDescription }}</p>
      <p><strong>Order Status:</strong> {{ order.closed | yesNo }}</p>
      <p><strong>Delivery Status:</strong> {{ order.delivered | yesNo }}</p>
    </div>
    <div class="card-footer" *ngIf="expandedOrderId === order.orderId">
      <button class="view-order-button" (click)="viewOrder(order.orderId)">View Order</button>
    </div>
  </div>

  <h4>Completed Orders</h4>
  <div class="card" *ngFor="let order of completedOrders" (click)="toggleOrder(order.orderId)" [ngClass]="{'expanded': expandedOrderId === order.orderId}">
    <div class="card-header">
      <h5>{{ order.customerName }}</h5>
      <p>{{ order.customerEmail }}</p>
    </div>
    <div class="card-body" *ngIf="expandedOrderId === order.orderId">
      <p><strong>Phone:</strong> {{ order.customerPhone }}</p>
      <p><strong>Order Type:</strong> {{ order.orderType }}</p>
      <p><strong>Amount:</strong> {{ order.orderAmount }}</p>
      <p><strong>Paid:</strong> {{ order.amountPaid }}</p>
      <p><strong>Balance:</strong> {{ order.remainingBalance }}</p>
      <p><strong>Event Date:</strong> {{ order.eventDate | date:'dd-MM-yyyy' }}</p>
      <p><strong>Event Location:</strong> {{ order.eventLocation }}</p>
      <p><strong>Description:</strong> {{ order.orderDescription }}</p>
      <p><strong>Order Status:</strong> {{ order.closed | yesNo }}</p>
      <p><strong>Delivery Status:</strong> {{ order.delivered | yesNo }}</p>
    </div>
    <div class="card-footer" *ngIf="expandedOrderId === order.orderId">
      <button class="view-order-button" (click)="viewOrder(order.orderId)">View Order</button>
    </div>
  </div>
</div>


<router-outlet></router-outlet>